/* ============================================================= 
   RWJ TRAVEL - Navegaci√≥n de una sola p√°gina (SPA ligera)
   C√≥digo corregido y afinado para Dino (Docente) - 2025-07-21
   ============================================================= */

// ‚ö†Ô∏è IMPORTANTE: Coloca este <script> AL FINAL del <body> o
// envu√©lvelo en DOMContentLoaded (ya lo hacemos abajo) para asegurar
// que los elementos del DOM existan antes de buscarlos.

(function(){
  'use strict';

  // ============================
  // Configuraci√≥n de rutas de im√°genes (ajusta seg√∫n tus carpetas)
  // ============================
  // Recomendaci√≥n: usa nombres en min√∫sculas y sin espacios/acentos para URLs.
  // üëá Corrigido seg√∫n indicaste: machu.jpg, mancora.jpg, montana.jpg, huacachina.jpg, amazonia.png, arequipa.jpg
  const IMG = {
    logo: 'logo.png',            // Logo principal
    machu: 'machu.jpg',          // Machu Picchu
    montana: 'montana.jpg',      // Monta√±a de Colores (Vinicunca)
    amazonia: 'amazonia.png',    // Amazon√≠a Peruana
    mancora: 'mancora.jpg',      // M√°ncora - Piura
    arequipa: 'arequipa.jpg',    // Arequipa - Ciudad Blanca
    huacachina: 'huacachina.jpg' // Oasis de Huacachina - Ica
  };

  // Espera al DOM para asegurar que los elementos existan
  document.addEventListener('DOMContentLoaded', init);

  function init(){
    // ============================
    // Elementos del DOM
    // ============================
    const abrir = document.getElementById('abrir-menu');
    const cerrar = document.getElementById('cerrar-menu');
    const menu = document.getElementById('menu');
    const contenido = document.getElementById('contenido');

    // Enlaces de navegaci√≥n
    const inicioLink = document.getElementById('inicio-link');
    const destinosLink = document.getElementById('destinos-link');
    const serviciosLink = document.getElementById('servicios-link');
    const inversionesLink = document.getElementById('inversiones-link');
    const contactoLink = document.getElementById('contacto-link');
    const acercaLink = document.getElementById('acerca-link');

    // Filtra nulos por si alg√∫n ID falta en el HTML
    const navLinks = [inicioLink, destinosLink, serviciosLink, inversionesLink, contactoLink, acercaLink].filter(Boolean);

    // ============================
    // Utilidades
    // ============================

    // Mostrar/ocultar men√∫ (m√≥vil)
    function abrirMenu() {
      if(!menu) return;
      menu.classList.add('mostrar');
      if(abrir) abrir.setAttribute('aria-expanded', 'true');
    }
    function cerrarMenu() {
      if(!menu) return;
      menu.classList.remove('mostrar');
      if(abrir) abrir.setAttribute('aria-expanded', 'false');
    }

    if(abrir) abrir.addEventListener('click', abrirMenu);
    if(cerrar) cerrar.addEventListener('click', cerrarMenu);

    // Cerrar men√∫ al hacer clic en un enlace (m√≥vil)
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', cerrarMenu);
    });

    // Cerrar men√∫ con tecla Esc
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') cerrarMenu();
    });

    // Reset + animaci√≥n de entrada
    function addFadeIn(element) {
      if(!element) return;
      element.classList.remove('fade-in'); // reinicia
      // fuerza reflow para reiniciar la animaci√≥n (hack simple)
      void element.offsetWidth;
      element.classList.add('fade-in');
    }

    // Marca el enlace activo
    function setActivo(linkEl) {
      navLinks.forEach(l => l.classList.remove('activo'));
      if(linkEl) linkEl.classList.add('activo');
    }

    // Bot√≥n volver al inicio (inserta string HTML)
    // show=true para mostrar; √∫salo en secciones internas.
    function renderBackHomeBtn(show=true) {
      if(!show) return '';
      return `
        <div class="volver-inicio-wrapper">
          <button class="btn-volver-inicio" type="button" aria-label="Volver al inicio">‚Üê Volver al Inicio</button>
        </div>
      `;
    }

    // Delegaci√≥n para bot√≥n volver
    if(contenido){
      contenido.addEventListener('click', (e) => {
        if (e.target.closest('.btn-volver-inicio')) {
          renderInicio();
          setActivo(inicioLink);
          window.scrollTo({ top: 0, behavior: 'smooth' });
        }
      });
    }

    // ============================
    // Secciones
    // ============================

    function renderInicio() {
      if(!contenido) return;
      contenido.innerHTML = `
        <div class="hero-section">
          ${renderBackHomeBtn(false)}
          <h1>Bienvenido a RWJ TRAVEL</h1>
          <p>Descubre la magia del pa√≠s de los Incas - Tu puerta de entrada a destinos extraordinarios</p>
          <div class="logo-wrapper">
            <img src="${IMG.logo}" alt="Logo RWJ Travel" width="300" height="300" style="border-radius:50%; box-shadow:0 10px 30px rgba(0,0,0,.2);">
          </div>
          <p class="intro-text">
            Explora desde las alturas de Machu Picchu hasta las profundidades de la Amazon√≠a. 
            Per√∫ te espera con su rica historia, cultura milenaria y paisajes que te quitar√°n el aliento.
          </p>
        </div>
      `;
      addFadeIn(contenido);
    }

    function renderDestinos() {
      if(!contenido) return;
      contenido.innerHTML = `
        <div class="services-section">
          ${renderBackHomeBtn()}
          <h2>üó∫Ô∏è Destinos Imperdibles del Per√∫</h2>
          <p class="texto-centro">
            Descubre los lugares m√°s fascinantes que hacen del Per√∫ un destino √∫nico en el mundo
          </p>
          <div class="destinations-grid">
            <!-- Machu Picchu -->
            <div class="destination-card">
              <div class="destination-image-container">
                <img src="${IMG.machu}" alt="Machu Picchu - Cusco" class="destination-image">
                <div class="destination-overlay">üèîÔ∏è Machu Picchu</div>
              </div>
              <div class="destination-content">
                <h3>Machu Picchu - Cusco</h3>
                <p>La ciudadela inca m√°s famosa del mundo, considerada una de las 7 Maravillas Modernas. Un lugar m√≠stico entre las nubes que te transportar√° al pasado glorioso del Imperio Inca.</p>
                <div class="destination-price">Desde S/ 450</div>
              </div>
            </div>
            <!-- Monta√±a de Colores (Vinicunca) -->
            <div class="destination-card">
              <div class="destination-image-container">
                <img src="${IMG.montana}" alt="Vinicunca - Monta√±a de Colores" class="destination-image">
                <div class="destination-overlay">üåà Monta√±a de Colores</div>
              </div>
              <div class="destination-content">
                <h3>Vinicunca - Monta√±a de Colores</h3>
                <p>Una maravilla natural de la Cordillera del Vilcanota. Sus laderas pintadas de colores naturales crean un paisaje surrealista a 5,200 metros de altura.</p>
                <div class="destination-price">Desde S/ 180</div>
              </div>
            </div>
            <!-- Amazon√≠a -->
            <div class="destination-card">
              <div class="destination-image-container">
                <img src="${IMG.amazonia}" alt="Amazon√≠a Peruana - Iquitos" class="destination-image">
                <div class="destination-overlay">üåø Amazon√≠a</div>
              </div>
              <div class="destination-content">
                <h3>Amazon√≠a Peruana - Iquitos</h3>
                <p>Sum√©rgete en la selva m√°s grande del mundo. Observa delfines rosados, anacondas y una biodiversidad √∫nica mientras navegas por el r√≠o Amazonas.</p>
                <div class="destination-price">Desde S/ 350</div>
              </div>
            </div>
            <!-- M√°ncora -->
            <div class="destination-card">
              <div class="destination-image-container">
                <img src="${IMG.mancora}" alt="M√°ncora - Piura" class="destination-image">
                <div class="destination-overlay">üèñÔ∏è M√°ncora</div>
              </div>
              <div class="destination-content">
                <h3>M√°ncora - Piura</h3>
                <p>Playas hermosas del norte peruano. Perfecto para surf, relajaci√≥n y disfrutar del clima tropical todo el a√±o con aguas c√°lidas.</p>
                <div class="destination-price">Desde S/ 220</div>
              </div>
            </div>
            <!-- Arequipa -->
            <div class="destination-card">
              <div class="destination-image-container">
                <img src="${IMG.arequipa}" alt="Arequipa - Ciudad Blanca" class="destination-image">
                <div class="destination-overlay">ü¶ô Arequipa</div>
              </div>
              <div class="destination-content">
                <h3>Arequipa - Ciudad Blanca</h3>
                <p>Patrimonio de la Humanidad con arquitectura colonial. Visita el Ca√±√≥n del Colca y observa c√≥ndores en vuelo.</p>
                <div class="destination-price">Desde S/ 280</div>
              </div>
            </div>
            <!-- Huacachina -->
            <div class="destination-card">
              <div class="destination-image-container">
                <img src="${IMG.huacachina}" alt="Oasis de Huacachina - Ica" class="destination-image">
                <div class="destination-overlay">üèûÔ∏è Huacachina</div>
              </div>
              <div class="destination-content">
                <h3>Oasis de Huacachina - Ica</h3>
                <p>Oasis natural en medio del desierto. Sandboard, buggies y un paisaje de cuento.</p>
                <div class="destination-price">Desde S/ 150</div>
              </div>
            </div>
          </div>
        </div>
      `;
      addFadeIn(contenido);
    }

    function renderServicios() {
      if(!contenido) return;
      contenido.innerHTML = `
        <div class="services-section">
          ${renderBackHomeBtn()}
          <h2>üéØ Nuestros Servicios</h2>
          <p class="texto-centro">
            Ofrecemos experiencias completas para que disfrutes al m√°ximo tu aventura peruana
          </p>
          <div class="services-grid">
            <div class="service-card"><h3>üè® Hospedaje y Alojamiento</h3><p>Desde hostales econ√≥micos hasta hoteles de lujo.</p></div>
            <div class="service-card"><h3>üöå Transporte Tur√≠stico</h3><p>Buses c√≥modos, vuelos dom√©sticos y transfers privados.</p></div>
            <div class="service-card"><h3>üó£Ô∏è Gu√≠as Especializados</h3><p>Locales certificados: espa√±ol, ingl√©s y quechua.</p></div>
            <div class="service-card"><h3>üçΩÔ∏è Experiencias Gastron√≥micas</h3><p>Tours de cocina peruana y reservas especiales.</p></div>
            <div class="service-card"><h3>üéí Paquetes Completos</h3><p>Tours 3‚Äì15 d√≠as con todo incluido.</p></div>
            <div class="service-card"><h3>üì± Asistencia 24/7</h3><p>Soporte continuo por WhatsApp.</p></div>
          </div>
          <div class="promo-especial">
            <h3>üéÅ Promoci√≥n Especial</h3>
            <p><strong>¬°15% de descuento en paquetes de 5 d√≠as o m√°s!</strong> Incluye seguro de viaje. V√°lido hasta fin de mes.</p>
          </div>
        </div>
      `;
      addFadeIn(contenido);
    }

    function renderInversiones() {
      if(!contenido) return;
      contenido.innerHTML = `
        <div class="services-section">
          ${renderBackHomeBtn()}
          <h2>üí∞ Planifica tu Presupuesto de Viaje</h2>
          <p class="texto-centro">Informaci√≥n de costos y opciones de financiamiento para tu aventura peruana</p>
          
          <div class="budget-grid">
            <div class="budget-card">
              <h3>üí∏ Presupuesto Econ√≥mico</h3>
              <div class="price-range">S/ 800 - S/ 1,500</div>
              <ul>
                <li>üè† Hostales y albergues</li>
                <li>üöå Transporte p√∫blico</li>
                <li>üçú Comida local</li>
                <li>üë• Tours grupales</li>
                <li>‚è∞ 3-5 d√≠as</li>
              </ul>
            </div>
            
            <div class="budget-card featured">
              <h3>‚≠ê Presupuesto Medio</h3>
              <div class="price-range">S/ 1,500 - S/ 3,000</div>
              <ul>
                <li>üè® Hoteles 3 estrellas</li>
                <li>üöê Transporte tur√≠stico</li>
                <li>üçΩÔ∏è Restaurantes tur√≠sticos</li>
                <li>üéØ Tours semi-privados</li>
                <li>‚è∞ 5-8 d√≠as</li>
              </ul>
            </div>
            
            <div class="budget-card">
              <h3>üíé Presupuesto Premium</h3>
              <div class="price-range">S/ 3,000 - S/ 6,000+</div>
              <ul>
                <li>üè∞ Hoteles boutique</li>
                <li>‚úàÔ∏è Vuelos dom√©sticos</li>
                <li>üë®‚Äçüç≥ Experiencias gastron√≥micas</li>
                <li>ü•á Tours privados VIP</li>
                <li>‚è∞ 8-15 d√≠as</li>
              </ul>
            </div>
          </div>
          
          <div class="financing-section">
            <h3>üí≥ Opciones de Financiamiento</h3>
            <div class="financing-options">
              <div class="financing-card">
                <h4>üî¢ Cuotas sin Inter√©s</h4>
                <p>Divide tu viaje en hasta 6 cuotas sin inter√©s con tarjetas participantes</p>
              </div>
              <div class="financing-card">
                <h4>üìÖ Reserva Anticipada</h4>
                <p>Paga solo el 30% ahora y el resto 15 d√≠as antes del viaje</p>
              </div>
              <div class="financing-card">
                <h4>üë• Descuento Grupal</h4>
                <p>15% de descuento para grupos de 4 o m√°s personas</p>
              </div>
            </div>
          </div>
        </div>
      `;
      addFadeIn(contenido);
    }

    function renderContacto() {
      if(!contenido) return;
      contenido.innerHTML = `
        <div class="services-section">
          ${renderBackHomeBtn()}
          <h2>üìß Cont√°ctanos</h2>
          <p class="texto-centro">Estamos aqu√≠ para hacer realidad tu viaje so√±ado</p>
          
          <div class="contact-grid">
            <div class="contact-card">
              <h3>üì± WhatsApp</h3>
              <p>Respuesta inmediata las 24 horas</p>
              <a href="https://wa.me/51987654321" class="contact-link" target="_blank">
                +51 901 911 854
                +51 916 599 102
              </a>
            </div>
            
            <div class="contact-card">
              <h3>üìß Email</h3>
              <p>Cotizaciones detalladas y consultas</p>
              <a href="mailto:info@rwjtravel.pe" class="contact-link">
                info@rwjtravel.pe
              </a>
            </div>
            
            <div class="contact-card">
              <h3>üìç Oficina</h3>
              <p>Lima, Per√∫</p>
              <span class="contact-link">
                IESTP "PAMPAS - TAYACAJA "
              </span>
            </div>
            
            <div class="contact-card">
              <h3>‚è∞ Horarios</h3>
              <p>Atenci√≥n personalizada</p>
              <span class="contact-link">
                Lun - Sab: 8:00 AM - 
                8:00 PM
              </span>
            </div>
          </div>
          
          <div class="contact-form-section">
            <h3>‚úâÔ∏è Env√≠anos tu Consulta</h3>
            <form class="contact-form">
              <div class="form-group">
                <input type="text" placeholder="Tu nombre completo" required>
                <input type="email" placeholder="Tu email" required>
              </div>
              <div class="form-group">
                <input type="tel" placeholder="Tu tel√©fono (opcional)">
                <select required>
                  <option value="">Destino de inter√©s</option>
                  <option value="machu">Machu Picchu</option>
                  <option value="montana">Monta√±a de Colores</option>
                  <option value="amazonia">Amazon√≠a</option>
                  <option value="mancora">M√°ncora</option>
                  <option value="arequipa">Arequipa</option>
                  <option value="huacachina">Huacachina</option>
                  <option value="multiple">M√∫ltiples destinos</option>
                </select>
              </div>
              <textarea placeholder="Cu√©ntanos sobre tu viaje ideal: fechas, n√∫mero de personas, preferencias..." rows="4" required></textarea>
              <button type="submit" class="submit-btn">Enviar Consulta üöÄ</button>
            </form>
          </div>
          
          <div class="social-section">
            <h3>üåê S√≠guenos en Redes</h3>
            <div class="social-links">
              <a href="#" class="social-link">üìò Facebook</a>
              <a href="#" class="social-link">üì∏ Instagram</a>
              <a href="#" class="social-link">üê¶ Twitter</a>
              <a href="#" class="social-link">üì∫ TikTok</a>
            </div>
          </div>
        </div>
      `;
      addFadeIn(contenido);
    }

    function renderAcerca() {
      if(!contenido) return;
      contenido.innerHTML = `
        <div class="about-section">
          ${renderBackHomeBtn()}
          <h2>‚ÑπÔ∏è Acerca de RWJ Travel</h2>
          <div class="historical-review">
            <h3>üìú Rese√±a Hist√≥rica</h3>
            <p>RWJ Travel naci√≥ en 2025 como una idea de tres amigos apasionados: Rudi, Waldir y Jos√©. Comenz√≥ como una galer√≠a local y creci√≥ a agencia integral.</p>
            <p>Nuestra misi√≥n: democratizar el turismo sin sacrificar calidad. Viajar nutre el alma.</p>
          </div>
          <div class="team-section">
            <h3>üë• Nuestro Equipo Fundador</h3>
            <div class="team-grid">
              <div class="team-member">
                <img src="RUDI.jpeg" alt="Foto de Rudi" class="team-member-image" width="120" height="120">
                <h4>üéØ Rudi</h4>
                <p>Estudiante de C.I. Especialista en destinos internacionales.</p>
              </div>
              <div class="team-member">
                <img src="WALDIR.jpeg" alt="Foto de Waldir" class="team-member-image" width="120" height="120">
                <h4>üíº Waldir</h4>
                <p>Estudiante de C.I. Experto en log√≠stica de viajes.</p>
              </div>
              <div class="team-member">
                <img src="JOSE.jpeg" alt="Foto de Jos√©" class="team-member-image" width="120" height="120">
                <h4>üåü Jos√©</h4>
                <p>Estudiante de C.I. Atenci√≥n personalizada.</p>
              </div>
            </div>
          </div>
          <div class="historical-review valores" style="margin-top:30px;">
            <h3>üéØ Nuestros Valores</h3>
            <ul>
              <li><strong>Excelencia:</strong> Superar expectativas en cada servicio.</li>
              <li><strong>Accesibilidad:</strong> Viajar para todos los presupuestos.</li>
              <li><strong>Autenticidad:</strong> Experiencias culturales reales.</li>
              <li><strong>Sostenibilidad:</strong> Turismo responsable con comunidades.</li>
            </ul>
          </div>
        </div>
      `;
      addFadeIn(contenido);
    }

    // ============================
    // Listeners de navegaci√≥n
    // ============================
    if(inicioLink) inicioLink.addEventListener('click', (e) => { e.preventDefault(); renderInicio(); setActivo(inicioLink); });
    if(destinosLink) destinosLink.addEventListener('click', (e) => { e.preventDefault(); renderDestinos(); setActivo(destinosLink); });
    if(serviciosLink) serviciosLink.addEventListener('click', (e) => { e.preventDefault(); renderServicios(); setActivo(serviciosLink); });
    if(inversionesLink) inversionesLink.addEventListener('click', (e) => { e.preventDefault(); renderInversiones(); setActivo(inversionesLink); });
    if(contactoLink) contactoLink.addEventListener('click', (e) => { e.preventDefault(); renderContacto(); setActivo(contactoLink); });
    if(acercaLink) acercaLink.addEventListener('click', (e) => { e.preventDefault(); renderAcerca(); setActivo(acercaLink); });

    // ============================
    // Mostrar Inicio al cargar
    // ============================
    renderInicio();
    setActivo(inicioLink);
  }
})();